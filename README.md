# 経路計画アルゴリズム比較ツール

これは、異なる経路計画アルゴリズム（A*、RRT、RRT*）の性能を比較するための可視化ツールです。このツールは、グラフィカルインターフェースを通じて、様々な環境における各アルゴリズムの経路計画プロセス、経路の質、計算効率を直感的に表示します。

## 機能特性

- **インタラクティブ地図編集**：ユーザーは自由に障害物を描画し、開始点と終了点を設定できます
- **複数アルゴリズムサポート**：A*、RRT、RRT*の3つの古典的な経路計画アルゴリズムを実装
- **リアルタイム可視化**：アルゴリズムの実行過程と経路計画結果をリアルタイムで表示
- **パフォーマンス指標記録**：各アルゴリズムの実行時間、経路長などのパフォーマンス指標を自動的に記録・比較
- **経路最適化**：RRT*アルゴリズムは経路最適化と経路点簡素化機能を含む
- **結果出力**：アルゴリズムの結果を自動的にExcelファイルに保存し、スクリーンショットで記録

## 技術スタック

- **Python 3.x**：主要開発言語
- **Pygame**：グラフィカルインターフェースと可視化に使用
- **Excel**：パフォーマンスデータの記録と分析に使用

## プロジェクト構成

```
comparison_10_14_time_excel_4_6/
├── main.py              # メインプログラムエントリー、ゲームメインループを含む
├── constants.py         # 定数定義（画面サイズ、色、アルゴリズムパラメータなど）
├── classes.py           # クラス定義（ゲーム状態列挙、ボタンクラスなど）
├── utils.py             # ユーティリティ関数（距離計算、衝突検出など）
├── astar_algorithm.py   # A*アルゴリズムの実装
├── rrt_star_algorithm.py # RRTおよびRRT*アルゴリズムの実装
├── drawing_utils.py     # 描画関連のユーティリティ関数
├── excel_utils.py       # Excel操作関連のユーティリティ関数
└── algorithm_screenshots/ # 自動生成されたアルゴリズムスクリーンショットの保存ディレクトリ
```

## 使用方法

### 依存関係のインストール

以下のPythonライブラリがインストールされていることを確認してください：

```bash
pip install pygame openpyxl
```

### プログラムの実行

main.pyファイルを直接実行します：

```bash
python main.py
```

### 操作手順

1. **障害物の描画**：プログラムを起動すると、デフォルトで障害物描画モードに入ります。マウスの左ボタンを押しながら地図上をドラッグして障害物を描画します
2. **開始点の設定**：下部の黒色モードボタンをクリックし、空白領域をクリックして開始点（赤色）を設定します
3. **終了点の設定**：再度モードボタンをクリックし、空白領域をクリックして終了点（緑色）を設定します
4. **アルゴリズムの選択**：
   - 黄色のボタンをクリックしてA*アルゴリズムを実行
   - 緑色のボタンをクリックしてRRTアルゴリズムを実行
   - 青色のボタンをクリックしてRRT*アルゴリズムを実行
5. **結果の確認**：アルゴリズムの実行が完了すると、経路長と実行時間が表示されます
6. **リセット**：赤色のリセットボタンをクリックすると、最初からやり直すことができます

## アルゴリズムの説明

### A*アルゴリズム

- グリッドベースの経路計画アルゴリズム
- ヒューリスティック関数（マンハッタン距離）を使用して探索を導く
- 最短経路を保証（存在する場合）

### RRTアルゴリズム

- サンプリングベースの経路計画アルゴリズム
- ランダムサンプリングによって段階的に探索ツリーを構築
- 最短経路を保証しないが、複雑な環境でのパフォーマンスが優れている

### RRT*アルゴリズム

- RRTアルゴリズムの改良版
- 経路を最適化できるリワイヤリング（rewire）メカニズムを追加
- サンプリングポイントの増加に伴い、経路の質は徐々に最適に近づく
- 本実装には追加の経路最適化と経路点簡素化機能が含まれている

## パフォーマンス評価

プログラムは自動的に以下のパフォーマンス指標を記録します：

- **実行時間**：アルゴリズムの開始から経路が見つかるまでの時間
- **経路長**：計画された経路の総長
- **最適化パーセンテージ**：RRT*アルゴリズムの最適化前後の経路長の改善パーセンテージ
- **経路点の数**：最適化前後の経路点の数の比較

すべての指標は自動的にExcelファイルに保存され、後で分析・比較することができます。

## カスタム設定

`constants.py`ファイルのパラメータを変更することで、アルゴリズムのパフォーマンスと可視化効果を調整できます：

- **SCREEN_WIDTH, SCREEN_HEIGHT**：画面サイズ
- **STEP_SIZE**：RRT/RRT*アルゴリズムの拡張ステップサイズ
- **REWIRE_RADIUS**：RRT*アルゴリズムのリワイヤリング半径
- **MAX_OPTIMIZATION_ITERATIONS**：経路最適化の最大反復回数
- **MAX_OPTIMIZATION_TIME**：経路最適化の最大時間（秒）

## 注意事項

1. 障害物は開始点や終了点を覆うことはできません
2. 経路が見つからない場合、プログラムは該当するメッセージを表示します
3. スクリーンショットは自動的に`algorithm_screenshots`ディレクトリに保存されます
4. Excelデータはプログラムの終了時に自動的に保存されます

## 拡張開発

このプロジェクトを拡張する場合は、以下の方向性を考慮してください：

- より多くの経路計画アルゴリズムを追加（Dijkstra、PRMなど）
- より複雑な地図生成アルゴリズムを実装
- 動的障害物を追加
- アルゴリズムのパフォーマンスを最適化するか、より高度な経路平滑化技術を実装

## ライセンス

このプロジェクトは学習と研究のみを目的としています。
